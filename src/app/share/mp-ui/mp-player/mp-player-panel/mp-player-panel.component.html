<!--
 * @Author: cwj
 * @Date: 2022-12-31 02:59:41
 * @LastEditors: cwj
 * @LastEditTime: 2023-01-21 04:08:57
 * @Introduce: 
-->
<div class="play-panel" [class.show]="show">
    <!-- 头部 -->
    <div class="hd">
        <div class="hdc">
            <h4>播放列表（<span>{{songList.length}}</span>)</h4>
            <div class="add-all">
                <i class="icon" title="收藏全部"></i>收藏全部
            </div>
            <span class="line"></span>
            <div class="clear-all">
                <i class="icon trush" title="清除"></i>清除
            </div>
            <p class="playing-name">{{currentSong?.name}}</p>
            <!-- 子指令调用已创建的 EventEmitter 实例中的 emit(payload) 方法来触发一个事件 -->
            <i class="icon close" (click)="onClose.emit()"></i>
        </div>
    </div>

    <!-- 列表 -->
    <div class="bd">
        <img src="//music.163.com/api/img/blur/109951163826278397" class="imgbg">
        <div class="msk"></div>
        <app-mp-scroll class="list-wrap" [data]="songList" (onScrollEnd)="scrollY = $event">
            <ul>
                <li *ngFor="let item of songList; index as i" [class.current]="currentIndex===i"
                    (click)="onChangeSong.emit(item)">
                    <i class="col arrow"></i>
                    <div class="col name ellipsis">{{item.name}}</div>
                    <div class="col icons">
                        <i class="ico like" title="收藏全部"></i>
                        <i class="ico share" title="分享"></i>
                        <i class="ico trush" title="删除"></i>
                    </div>
                    <div class="singers clearfix ellipsis">
                        <div class="singer-item" *ngFor="let singer of item.ar;last as isLast">
                            <a href="" class="col ellipsis">{{singer.name}}</a>
                            <span [hidden]="isLast">/</span>
                        </div>
                    </div>
                    <div class="col duration">{{(item.dt/1000)|formatTime}}</div>
                    <div class="col link"></div>
                </li>
            </ul>
        </app-mp-scroll>

        <app-mp-scroll class="list-lyric">
            <ul>
                <li *ngFor="let item of currentLyric">
                    {{item.txt}}<br/>{{item.txtCn}}
                </li>
            </ul>
        </app-mp-scroll>

    </div>
</div>